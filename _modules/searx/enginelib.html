<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>searx.enginelib &#8212; SearXNG Documentation (2025.11.1+0245327fc)</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=6625fa76" />
    <link rel="stylesheet" type="text/css" href="../../_static/searxng.css?v=52e4ff28" />
    <script src="../../_static/documentation_options.js?v=90b74fc4"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script data-project="searxng" data-version="2025.11.1+0245327fc" src="../../_static/describe_version.js?v=fa7f30d0"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SearXNG Documentation (2025.11.1+0245327fc)</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">searx.enginelib</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for searx.enginelib</h1><div class="highlight"><pre>
<span></span><span class="c1"># SPDX-License-Identifier: AGPL-3.0-or-later</span>
<span class="sd">&quot;&quot;&quot;Implementations of the framework for the SearXNG engines.</span>

<span class="sd">- :py:obj:`searx.enginelib.EngineCache`</span>
<span class="sd">- :py:obj:`searx.enginelib.Engine`</span>
<span class="sd">- :py:obj:`searx.enginelib.traits`</span>

<span class="sd">There is a command line for developer purposes and for deeper analysis.  Here is</span>
<span class="sd">an example in which the command line is called in the development environment::</span>

<span class="sd">  $ ./manage pyenv.cmd bash --norc --noprofile</span>
<span class="sd">  (py3) python -m searx.enginelib --help</span>

<span class="sd">.. hint::</span>

<span class="sd">   The long term goal is to modularize all implementations of the engine</span>
<span class="sd">   framework here in this Python package.  ToDo:</span>

<span class="sd">   - move implementations of the :ref:`searx.engines loader` to a new module in</span>
<span class="sd">     the :py:obj:`searx.enginelib` namespace.</span>

<span class="sd">-----</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;EngineCache&quot;</span><span class="p">,</span> <span class="s2">&quot;Engine&quot;</span><span class="p">,</span> <span class="s2">&quot;ENGINES_CACHE&quot;</span><span class="p">]</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">t</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">abc</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">string</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">typer</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">..cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExpireCacheSQLite</span><span class="p">,</span> <span class="n">ExpireCacheCfg</span>

<span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">searx.enginelib</span><span class="w"> </span><span class="kn">import</span> <span class="n">traits</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">searx.enginelib.traits</span><span class="w"> </span><span class="kn">import</span> <span class="n">EngineTraits</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">searx.extended_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">SXNG_Response</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">searx.result_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">EngineResults</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">searx.search.processors</span><span class="w"> </span><span class="kn">import</span> <span class="n">OfflineParamTypes</span><span class="p">,</span> <span class="n">OnlineParamTypes</span>

<span class="n">ENGINES_CACHE</span><span class="p">:</span> <span class="n">ExpireCacheSQLite</span> <span class="o">=</span> <span class="n">ExpireCacheSQLite</span><span class="o">.</span><span class="n">build_cache</span><span class="p">(</span>
    <span class="n">ExpireCacheCfg</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;ENGINES_CACHE&quot;</span><span class="p">,</span>
        <span class="n">MAXHOLD_TIME</span><span class="o">=</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">7</span><span class="p">,</span>  <span class="c1"># 7 days</span>
        <span class="n">MAINTENANCE_PERIOD</span><span class="o">=</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>  <span class="c1"># 2h</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="sd">&quot;&quot;&quot;Global :py:obj:`searx.cache.ExpireCacheSQLite` instance where the cached</span>
<span class="sd">values from all engines are stored.  The `MAXHOLD_TIME` is 7 days and the</span>
<span class="sd">`MAINTENANCE_PERIOD` is set to two hours.&quot;&quot;&quot;</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Typer</span><span class="p">()</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">state</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Show state for the caches of the engines.&quot;&quot;&quot;</span>

    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;cache tables and key/values&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ENGINES_CACHE</span><span class="o">.</span><span class="n">state</span><span class="p">()</span><span class="o">.</span><span class="n">report</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">()</span>
    <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;properties of </span><span class="si">{</span><span class="n">ENGINES_CACHE</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ENGINES_CACHE</span><span class="o">.</span><span class="n">properties</span><span class="p">))</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">maintenance</span><span class="p">(</span><span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Carry out maintenance on cache of the engines.&quot;&quot;&quot;</span>
    <span class="n">ENGINES_CACHE</span><span class="o">.</span><span class="n">maintenance</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">)</span>


<div class="viewcode-block" id="EngineCache">
<a class="viewcode-back" href="../../dev/engines/enginelib.html#searx.enginelib.EngineCache">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">EngineCache</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Persistent (SQLite) key/value cache that deletes its values again after</span>
<span class="sd">    ``expire`` seconds (default/max: :py:obj:`MAXHOLD_TIME</span>
<span class="sd">    &lt;searx.cache.ExpireCacheCfg.MAXHOLD_TIME&gt;`).  This class is a wrapper around</span>
<span class="sd">    :py:obj:`ENGINES_CACHE` (:py:obj:`ExpireCacheSQLite</span>
<span class="sd">    &lt;searx.cache.ExpireCacheSQLite&gt;`).</span>

<span class="sd">    In the :origin:`searx/engines/demo_offline.py` engine you can find an</span>
<span class="sd">    exemplary implementation of such a cache other examples are implemented</span>
<span class="sd">    in:</span>

<span class="sd">    - :origin:`searx/engines/radio_browser.py`</span>
<span class="sd">    - :origin:`searx/engines/soundcloud.py`</span>
<span class="sd">    - :origin:`searx/engines/startpage.py`</span>

<span class="sd">    .. code: python</span>

<span class="sd">       from searx.enginelib import EngineCache</span>
<span class="sd">       CACHE: EngineCache</span>

<span class="sd">       def init(engine_settings):</span>
<span class="sd">           global CACHE</span>
<span class="sd">           CACHE = EngineCache(engine_settings[&quot;name&quot;])</span>

<span class="sd">       def request(query, params):</span>
<span class="sd">           token = CACHE.get(key=&quot;token&quot;)</span>
<span class="sd">           if token is None:</span>
<span class="sd">               token = get_token()</span>
<span class="sd">               # cache token of this engine for 1h</span>
<span class="sd">               CACHE.set(key=&quot;token&quot;, value=token, expire=3600)</span>
<span class="sd">           ...</span>

<span class="sd">    For introspection of the DB, jump into developer environment and run command to</span>
<span class="sd">    show cache state::</span>

<span class="sd">        $ ./manage pyenv.cmd bash --norc --noprofile</span>
<span class="sd">        (py3) python -m searx.enginelib cache state</span>

<span class="sd">        cache tables and key/values</span>
<span class="sd">        ===========================</span>
<span class="sd">        [demo_offline        ] 2025-04-22 11:32:50 count        --&gt; (int) 4</span>
<span class="sd">        [startpage           ] 2025-04-22 12:32:30 SC_CODE      --&gt; (str) fSOBnhEMlDfE20</span>
<span class="sd">        [duckduckgo          ] 2025-04-22 12:32:31 4dff493e.... --&gt; (str) 4-128634958369380006627592672385352473325</span>
<span class="sd">        [duckduckgo          ] 2025-04-22 12:40:06 3e2583e2.... --&gt; (str) 4-263126175288871260472289814259666848451</span>
<span class="sd">        [radio_browser       ] 2025-04-23 11:33:08 servers      --&gt; (list) [&#39;https://de2.api.radio-browser.info&#39;,  ...]</span>
<span class="sd">        [soundcloud          ] 2025-04-29 11:40:06 guest_client_id --&gt; (str) EjkRJG0BLNEZquRiPZYdNtJdyGtTuHdp</span>
<span class="sd">        [wolframalpha        ] 2025-04-22 12:40:06 code         --&gt; (str) 5aa79f86205ad26188e0e26e28fb7ae7</span>
<span class="sd">        number of tables: 6</span>
<span class="sd">        number of key/value pairs: 7</span>

<span class="sd">    In the &quot;cache tables and key/values&quot; section, the table name (engine name) is at</span>
<span class="sd">    first position on the second there is the calculated expire date and on the</span>
<span class="sd">    third and fourth position the key/value is shown.</span>

<span class="sd">    About duckduckgo: The *vqd coode* of ddg depends on the query term and therefore</span>
<span class="sd">    the key is a hash value of the query term (to not to store the raw query term).</span>

<span class="sd">    In the &quot;properties of ENGINES_CACHE&quot; section all properties of the SQLiteAppl /</span>
<span class="sd">    ExpireCache and their last modification date are shown::</span>

<span class="sd">        properties of ENGINES_CACHE</span>
<span class="sd">        ===========================</span>
<span class="sd">        [last modified: 2025-04-22 11:32:27] DB_SCHEMA           : 1</span>
<span class="sd">        [last modified: 2025-04-22 11:32:27] LAST_MAINTENANCE    :</span>
<span class="sd">        [last modified: 2025-04-22 11:32:27] crypt_hash          : ca612e3566fdfd7cf7efe...</span>
<span class="sd">        [last modified: 2025-04-22 11:32:30] CACHE-TABLE--demo_offline: demo_offline</span>
<span class="sd">        [last modified: 2025-04-22 11:32:30] CACHE-TABLE--startpage: startpage</span>
<span class="sd">        [last modified: 2025-04-22 11:32:31] CACHE-TABLE--duckduckgo: duckduckgo</span>
<span class="sd">        [last modified: 2025-04-22 11:33:08] CACHE-TABLE--radio_browser: radio_browser</span>
<span class="sd">        [last modified: 2025-04-22 11:40:06] CACHE-TABLE--soundcloud: soundcloud</span>
<span class="sd">        [last modified: 2025-04-22 11:40:06] CACHE-TABLE--wolframalpha: wolframalpha</span>

<span class="sd">    These properties provide information about the state of the ExpireCache and</span>
<span class="sd">    control the behavior.  For example, the maintenance intervals are controlled by</span>
<span class="sd">    the last modification date of the LAST_MAINTENANCE property and the hash value</span>
<span class="sd">    of the password can be used to detect whether the password has been changed (in</span>
<span class="sd">    this case the DB entries can no longer be decrypted and the entire cache must be</span>
<span class="sd">    discarded).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expire</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">expire</span> <span class="ow">or</span> <span class="n">ENGINES_CACHE</span><span class="o">.</span><span class="n">cfg</span><span class="o">.</span><span class="n">MAXHOLD_TIME</span>
        <span class="n">_valid</span> <span class="o">=</span> <span class="s2">&quot;-_.&quot;</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">c</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">_valid</span> <span class="k">else</span> <span class="s2">&quot;_&quot;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">engine_name</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span> <span class="n">expire</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ENGINES_CACHE</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
            <span class="n">expire</span><span class="o">=</span><span class="n">expire</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">expire</span><span class="p">,</span>
            <span class="n">ctx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ENGINES_CACHE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">secret_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ENGINES_CACHE</span><span class="o">.</span><span class="n">secret_hash</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>



<div class="viewcode-block" id="Engine">
<a class="viewcode-back" href="../../dev/engines/enginelib.html#searx.enginelib.Engine">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Engine</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>  <span class="c1"># pylint: disable=too-few-public-methods</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class of engine instances build from YAML settings.</span>

<span class="sd">    Further documentation see :ref:`general engine configuration`.</span>

<span class="sd">    .. hint::</span>

<span class="sd">       This class is currently never initialized and only used for type hinting.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span>

    <span class="c1"># Common options in the engine module</span>

    <span class="n">engine_type</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Type of the engine (:ref:`searx.search.processors`)&quot;&quot;&quot;</span>

    <span class="n">paging</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Engine supports multiple pages.&quot;&quot;&quot;</span>

    <span class="n">max_page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If the engine supports paging, then this is the value for the last page</span>
<span class="sd">    that is still supported. ``0`` means unlimited numbers of pages.&quot;&quot;&quot;</span>

    <span class="n">time_range_support</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Engine supports search time range.&quot;&quot;&quot;</span>

    <span class="n">safesearch</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Engine supports SafeSearch&quot;&quot;&quot;</span>

    <span class="n">language_support</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Engine supports languages (locales) search.&quot;&quot;&quot;</span>

    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;For an engine, when there is ``language: ...`` in the YAML settings the engine</span>
<span class="sd">    does support only this one language:</span>

<span class="sd">    .. code:: yaml</span>

<span class="sd">      - name: google french</span>
<span class="sd">        engine: google</span>
<span class="sd">        language: fr</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;For an engine, when there is ``region: ...`` in the YAML settings the engine</span>
<span class="sd">    does support only this one region::</span>

<span class="sd">    .. code:: yaml</span>

<span class="sd">      - name: google belgium</span>
<span class="sd">        engine: google</span>
<span class="sd">        region: fr-BE</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fetch_traits</span><span class="p">:</span> <span class="s2">&quot;Callable[[EngineTraits, bool], None]&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Function to to fetch engine&#39;s traits from origin.&quot;&quot;&quot;</span>

    <span class="n">traits</span><span class="p">:</span> <span class="s2">&quot;traits.EngineTraits&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Traits of the engine.&quot;&quot;&quot;</span>

    <span class="c1"># settings.yml</span>

    <span class="n">categories</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Specifies to which :ref:`engine categories` the engine should be added.&quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Name that will be used across SearXNG to define this engine.  In settings, on</span>
<span class="sd">    the result page ..&quot;&quot;&quot;</span>

    <span class="n">engine</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Name of the python file used to handle requests and responses to and from</span>
<span class="sd">    this search engine (file name from :origin:`searx/engines` without</span>
<span class="sd">    ``.py``).&quot;&quot;&quot;</span>

    <span class="n">enable_http</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enable HTTP (by default only HTTPS is enabled).&quot;&quot;&quot;</span>

    <span class="n">shortcut</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Code used to execute bang requests (``!foo``)&quot;&quot;&quot;</span>

    <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Specific timeout for search-engine.&quot;&quot;&quot;</span>

    <span class="n">display_error_messages</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Display error messages on the web UI.&quot;&quot;&quot;</span>

    <span class="n">proxies</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set proxies for a specific engine (YAML):</span>

<span class="sd">    .. code:: yaml</span>

<span class="sd">       proxies :</span>
<span class="sd">         http:  socks5://proxy:port</span>
<span class="sd">         https: socks5://proxy:port</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">disabled</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;To disable by default the engine, but not deleting it.  It will allow the</span>
<span class="sd">    user to manually activate it in the settings.&quot;&quot;&quot;</span>

    <span class="n">inactive</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove the engine from the settings (*disabled &amp; removed*).&quot;&quot;&quot;</span>

    <span class="n">about</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Additional fields describing the engine.</span>

<span class="sd">    .. code:: yaml</span>

<span class="sd">       about:</span>
<span class="sd">          website: https://example.com</span>
<span class="sd">          wikidata_id: Q306656</span>
<span class="sd">          official_api_documentation: https://example.com/api-doc</span>
<span class="sd">          use_official_api: true</span>
<span class="sd">          require_api_key: true</span>
<span class="sd">          results: HTML</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">using_tor_proxy</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Using tor proxy (``true``) or not (``false``) for this engine.&quot;&quot;&quot;</span>

    <span class="n">send_accept_language_header</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;When this option is activated, the language (locale) that is selected by</span>
<span class="sd">    the user is used to build and send a ``Accept-Language`` header in the</span>
<span class="sd">    request to the origin search engine.&quot;&quot;&quot;</span>

    <span class="n">tokens</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A list of secret tokens to make this engine *private*, more details see</span>
<span class="sd">    :ref:`private engines`.&quot;&quot;&quot;</span>

    <span class="n">weight</span><span class="p">:</span> <span class="nb">int</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Weighting of the results of this engine (:ref:`weight &lt;settings engines&gt;`).&quot;&quot;&quot;</span>

<div class="viewcode-block" id="Engine.setup">
<a class="viewcode-back" href="../../dev/engines/enginelib.html#searx.enginelib.Engine.setup">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine_settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>  <span class="c1"># pylint: disable=unused-argument</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dynamic setup of the engine settings.</span>

<span class="sd">        With this method, the engine&#39;s setup is carried out.  For example, to</span>
<span class="sd">        check or dynamically adapt the values handed over in the parameter</span>
<span class="sd">        ``engine_settings``.  The return value (True/False) indicates whether</span>
<span class="sd">        the setup was successful and the engine can be built or rejected.</span>

<span class="sd">        The method is optional and is called synchronously as part of the</span>
<span class="sd">        initialization of the service and is therefore only suitable for simple</span>
<span class="sd">        (local) exams/changes at the engine setting.  The :py:obj:`Engine.init`</span>
<span class="sd">        method must be used for longer tasks in which values of a remote must be</span>
<span class="sd">        determined, for example.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Engine.init">
<a class="viewcode-back" href="../../dev/engines/enginelib.html#searx.enginelib.Engine.init">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">engine_settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pylint: disable=unused-argument</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialization of the engine.</span>

<span class="sd">        The method is optional and asynchronous (in a thread).  It is suitable,</span>
<span class="sd">        for example, for setting up a cache (for the engine) or for querying</span>
<span class="sd">        values (required by the engine) from a remote.</span>

<span class="sd">        Whether the initialization was successful can be indicated by the return</span>
<span class="sd">        value ``True`` or even ``False``.</span>

<span class="sd">        - If no return value is given from this init method (``None``), this is</span>
<span class="sd">          equivalent to ``True``.</span>

<span class="sd">        - If an exception is thrown as part of the initialization, this is</span>
<span class="sd">          equivalent to ``False``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Engine.search">
<a class="viewcode-back" href="../../dev/engines/enginelib.html#searx.enginelib.Engine.search">[docs]</a>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="s2">&quot;OfflineParamTypes&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;EngineResults&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Search method of the ``offline`` engines&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="Engine.request">
<a class="viewcode-back" href="../../dev/engines/enginelib.html#searx.enginelib.Engine.request">[docs]</a>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="s2">&quot;OnlineParamTypes&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to build the parameters for the request of an ``online``</span>
<span class="sd">        engine.&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="Engine.response">
<a class="viewcode-back" href="../../dev/engines/enginelib.html#searx.enginelib.Engine.response">[docs]</a>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp</span><span class="p">:</span> <span class="s2">&quot;SXNG_Response&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;EngineResults&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Method to parse the response of an ``online`` engine.&quot;&quot;&quot;</span></div>
</div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  
    
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/searxng-wordmark.svg" alt="Logo of SearXNG"/>
            </a></p>
  

<h3><a href="../../index.html">Table of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../own-instance.html">Why use a private instance?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/index.html">Administrator documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/index.html">Developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utils/index.html">DevOps tooling box</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/index.html">Source-Code</a></li>
</ul>

  <h3>Project Links</h3>
  <ul>
    <li><a href="https://github.com/searxng/searxng/tree/master">Source</a>
  
    <li><a href="https://github.com/searxng/searxng/wiki">Wiki</a>
  
    <li><a href="https://searx.space">Public instances</a>
  
    <li><a href="https://github.com/searxng/searxng/issues">Issue Tracker</a>
  </ul><h3>Navigation</h3>
<ul>
  <li><a href="../../index.html">Overview</a>
    <ul>
      <li><a href="../index.html">Module code</a>
        
          
          </ul>
      </li>
    </ul>
  </li>
</ul>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright SearXNG team.
    </div>
  </body>
</html>