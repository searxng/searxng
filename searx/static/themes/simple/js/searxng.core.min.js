const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/QueryPlugin.min.js","js/defineProperty.min.js","js/InfiniteScrollPlugin.min.js"])))=>i.map(i=>d[i]);
const e=e=>{if(!e)throw Error(`DOM element not found`)};function t(t,n={}){n.assert??=!0;let r=document.getElementById(t);return n.assert&&e(r),r}const n={index:`index`,results:`results`,preferences:`preferences`,unknown:`unknown`},r={closeDetail:void 0,scrollPageToSelected:void 0,selectImage:void 0,selectNext:void 0,selectPrevious:void 0};var i=()=>{let e=document.querySelector(`meta[name="endpoint"]`)?.getAttribute(`content`);return e&&e in n?e:n.unknown},a=()=>{let e=document.querySelector(`script[client_settings]`)?.getAttribute(`client_settings`);if(!e)return{};try{return JSON.parse(atob(e))}catch(e){return console.error(`Failed to load client_settings:`,e),{}}};const o=async(e,t,n)=>{let r=new AbortController,i=setTimeout(()=>r.abort(),n?.timeout??3e4),a=await fetch(t,{body:n?.body,method:e,signal:r.signal}).finally(()=>clearTimeout(i));if(!a.ok)throw Error(a.statusText);return a},s=(e,t,n,r)=>{if(typeof t!=`string`){t.addEventListener(e,n,r);return}document.addEventListener(e,e=>{for(let r of e.composedPath())if(r instanceof HTMLElement&&r.matches(t)){try{n.call(r,e)}catch(e){console.error(e)}break}},r)},c=(e,t)=>{for(let e of t?.on??[])if(!e)return;document.readyState===`loading`?s(`DOMContentLoaded`,document,e,{once:!0}):e()},l=i(),u=a();s(`click`,`.close`,function(){this.parentNode?.classList.add(`invisible`)});var d=class{constructor(){this.invoke()}async invoke(){try{let e=await this.do();if(console.debug(`[PLUGIN] ${this.name}: OK`),!e)return;(e instanceof HTMLElement||typeof e==`string`||typeof e==`number`)&&await this.insertAnswerContainer(e)}catch(e){console.error(`[PLUGIN] ${this.name}:`,e)}}async insertAnswerContainer(e){let n=t(`results`),r=t(`answers`,{assert:!1});if(!r){let e=document.createElement(`h4`);e.setAttribute(`class`,`title`),e.setAttribute(`id`,`answers-title`),e.textContent=`Answers : `,r=document.createElement(`div`),r.setAttribute(`id`,`answers`),r.setAttribute(`role`,`complementary`),r.setAttribute(`aria-labelledby`,`answers-title`),r.appendChild(e)}if(!(e instanceof HTMLElement)){let t=document.createElement(`span`);t.innerHTML=e.toString(),e=t}r.appendChild(e),n.insertAdjacentElement(`afterbegin`,r)}};const f=async(e,t)=>{p(t).catch(e=>{console.debug(`Load condition failed:`,e)}),new(await(e())).default};var p=async e=>{switch(e.on){case`global`:return;case`endpoint`:if(typeof e.where==`string`&&e.where!==l||Array.isArray(e.where)&&!e.where.includes(l))throw Error(`not on the expected endpoint`);return;default:throw Error(`unhandled "on" trigger`)}},m=`modulepreload`,h=function(e){return`/static/themes/simple/`+e},g={};const _=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=h(t,n),t in g)return;g[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:m,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};c(()=>{document.documentElement.classList.remove(`no-js`),document.documentElement.classList.add(`js`),f(()=>_(()=>import(`./QueryPlugin.min.js`),__vite__mapDeps([0,1])),{on:`endpoint`,where:n.results}),u.infinite_scroll&&f(()=>_(()=>import(`./InfiniteScrollPlugin.min.js`),__vite__mapDeps([2,1])),{on:`endpoint`,where:n.results})}),c(()=>{_(()=>import(`./keyboard.min.js`),[]),_(()=>import(`./search.min.js`),[]),u.autocomplete&&_(()=>import(`./autocomplete.min.js`),[])},{on:[l===n.index]}),c(()=>{_(()=>import(`./keyboard.min.js`),[]),_(()=>import(`./mapresult.min.js`),[]),_(()=>import(`./results.min.js`),[]),_(()=>import(`./search.min.js`),[]),u.autocomplete&&_(()=>import(`./autocomplete.min.js`),[])},{on:[l===n.results]}),c(()=>{_(()=>import(`./preferences.min.js`),[])},{on:[l===n.preferences]});export{r as a,e as c,s as i,d as n,u as o,o as r,t as s,_ as t};
//# sourceMappingURL=searxng.core.min.js.map